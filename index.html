<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Message Generator</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f9;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 700px;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1a2533;
            text-align: center;
            margin-top: 0;
            margin-bottom: 25px;
        }
        label {
            display: block;
            font-weight: 600;
            color: #3b4d61;
            margin-bottom: 8px;
        }
        select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #dbe2e8;
            border-radius: 6px;
            font-size: 16px;
            box-sizing: border-box;
        }
        select { background-color: #fcfdff; cursor: pointer; }
        textarea { margin-top: 20px; height: 300px; resize: vertical; background-color: #f8f9fa; }
        button {
            display: block;
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        button:hover { background-color: #0056b3; }
        .status { text-align: center; margin-top: 15px; color: #28a745; font-weight: 500; height: 20px; }
        .brand-selector { display: flex; justify-content: center; margin-bottom: 25px; border: 1px solid #dbe2e8; border-radius: 6px; overflow: hidden; }
        .brand-selector label {
            flex: 1;
            text-align: center;
            padding: 12px;
            margin: 0;
            cursor: pointer;
            background-color: #f8f9fa;
            color: #555;
            transition: background-color 0.2s, color 0.2s;
        }
        .brand-selector input[type="radio"] { display: none; }
        .brand-selector input[type="radio"]:checked + label {
            background-color: #007bff;
            color: white;
            font-weight: 600;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Customer Message Generator</h1>

        <div class="brand-selector">
            <input type="radio" id="brandBT" name="brand" value="BT" checked>
            <label for="brandBT">BT</label>
            <input type="radio" id="brandEE" name="brand" value="EE">
            <label for="brandEE">EE</label>
        </div>

        <label for="scenario">Select a scenario:</label>
        <select id="scenario">
            <!-- Scenarios will be loaded here by JavaScript -->
        </select>

        <textarea id="messageOutput" readonly placeholder="Your generated message will appear here..."></textarea>
        
        <button id="copyButton">Copy Message</button>
        <div id="statusMessage" class="status"></div>
    </div>

<script>
    const scenarioSelect = document.getElementById('scenario');
    const messageOutput = document.getElementById('messageOutput');
    const copyButton = document.getElementById('copyButton');
    const statusMessage = document.getElementById('statusMessage');
    const brandRadios = document.querySelectorAll('input[name="brand"]');

    // --- All scenarios are now stored here, inside the script ---
    const scenarios = [
        {
            id: 'ducting_issue',
            dropdownText: 'External Ducting Issue (12 Weeks)',
            delayDays: 60,
            bt_template: `We're sorry to let you know that there are some issues with the external ducting for your BT service, but don't worry - we've already tasked our contractors with sorting it out! It's quite a complex job, so we're estimating it may take up to 12 weeks to fully resolve.\n\nHowever, we promise to keep you updated along the way and aim to provide you with an update no later than 9 PM on the {date}.\n\nYou can find a helpful booklet here: https://care.bt.com/next_steps.`,
            ee_template: `Hi there. We've hit a snag with some external ducting work for your new EE Full Fibre service. It's a tricky issue that our network partners are working to resolve. We expect this to be sorted within 12 weeks.\n\nYour next update will be scheduled for {date}. We're sorry for the delay and appreciate your patience.\n\nAs an EE customer, you can use BT/EE WIFI hotspots for free while you wait. Find out more here: https://ee-wifi.ee.co.uk/public/ee/help/index.htm`
        },
        {
            id: 'engineer_shortage',
            dropdownText: 'Engineer Shortage (4 Weeks)',
            delayDays: 20,
            bt_template: `We're writing to inform you of a slight delay to your BT installation due to an unexpected regional shortage of specialist engineers. We are actively reallocating resources and expect to have an engineer with you within 4 weeks. We will provide a confirmed installation date no later than {date}. We sincerely apologize for the inconvenience this may cause.`,
            ee_template: `We're writing to inform you of a slight delay to your EE installation due to an unexpected regional shortage of specialist engineers. We are actively reallocating resources and expect to have an engineer with you within 4 weeks. We will provide a confirmed installation date no later than {date}. We sincerely apologize for the inconvenience this may cause.`
        },
        {
            id: 'wayleave_delay',
            dropdownText: 'Wayleave/Permit Delay (8 Weeks)',
            delayDays: 40,
            bt_template: `There has been a delay in progressing your BT order as we require legal permission, known as a wayleave, to install our equipment on private land. This process can be lengthy and involves multiple parties. We are working to get this approved as quickly as possible and estimate a resolution within 8 weeks. Your next formal update will be on or before {date}. Thank you for your patience.`,
            ee_template: `There has been a delay in progressing your EE order as we require legal permission, known as a wayleave, to install our equipment on private land. This process can be lengthy and involves multiple parties. We are working to get this approved as quickly as possible and estimate a resolution within 8 weeks. Your next formal update will be on or before {date}. Thank you for your patience.`
        },
        {
            id: 'damaged_cabinet',
            dropdownText: 'Damaged Cabinet (12 Weeks)',
            delayDays: 60,
            bt_template: `Hey there, we wanted to let you know that we've identified a fault in the network, but don't worry - we've already assigned an engineer to work on getting it resolved! It's a pretty complex job, so it might take up to twelve weeks to fully fix. But don't worry, we'll be in touch with regular updates and aim to provide you with an update no later than 9 PM on {date}.\n\nPlease read this handy booklet for more detail on the work required to get you your new service: https://care.bt.com/next_steps. As a BT Customer, you can also access BT WiFi hotspots free of charge anywhere in the UK while you wait. This brilliant booklet will provide all the information you need: https://care.bt.com/_bt_wifi_hotspots.`,
            ee_template: `Hi there, we wanted to let you know that we've identified a network fault affecting your EE service. We've already assigned an engineer to work on it. It's a complex job, so it might take up to twelve weeks to fully fix. We'll be in touch with regular updates and aim to provide you with an update no later than 9 PM on {date}.\n\nAs an EE customer, you can use BT/EE WIFI hotspots for free while you wait. Find out more here: https://ee-wifi.ee.co.uk/public/ee/help/index.htm`
        },
        {
            id: 'damaged_pole',
            dropdownText: 'Damaged Pole (12 Weeks)',
            delayDays: 60,
            bt_template: `Hey there! We've got some news to share with you - unfortunately, there's a damaged pole in our network that's causing some trouble for your property. But don't worry - we're on it! Our civils and engineering teams are already working hard to fix it up. It's a bit of a big job though, so it might take up to 12 weeks to fully resolve.\n\nWe promise to keep you updated along the way though, and we'll get in touch with another update no later than 9 PM on {date}.\n\nPlease read this handy booklet for more detail on the work required to get you your new Full Fibre service: https://care.bt.com/next_steps. As a BT Customer, you can also access BT WiFi hotspots free of charge anywhere in the UK while you wait. This brilliant booklet will provide all the information you need: https://care.bt.com/_bt_wifi_hotspots`,
            ee_template: `Hi there. We've found a damaged pole in the network that's affecting your property. Our civils and engineering teams are already working to fix it. It's a big job, so it might take up to 12 weeks to fully resolve.\n\nWe promise to keep you updated, and we'll get in touch with another update no later than 9 PM on {date}.\n\nAs an EE customer, you can use BT/EE WIFI hotspots for free while you wait. Find out more here: https://ee-wifi.ee.co.uk/public/ee/help/index.htm`
        },
        {
            id: 'developer_delays',
            dropdownText: 'Developer Delays (3 Weeks)',
            delayDays: 15,
            bt_template: `Hey there! We just wanted to let you know that there's been a bit of a delay with your order, and we're really sorry for any inconvenience this might cause. It turns out that the developer of your property is experiencing some delays, but don't worry - our suppliers are already working closely with them to get this issue sorted as quickly as possible! Unfortunately, it might take up to 3 weeks to fully resolve.\n\nWe'll be sure to keep you updated along the way though, and we'll get in touch with another update no later than 9 PM on {date}.`,
            ee_template: `Hi there. We wanted to let you know that there's been a delay with your order. It appears the developer of your property is experiencing some delays, but our suppliers are working closely with them to get this sorted. It might take up to 3 weeks to resolve.\n\nWe'll keep you updated and will get in touch with another update no later than 9 PM on {date}. We're sorry for the inconvenience.`
        },
        {
            id: 'duct_cable_stock',
            dropdownText: 'Duct and Cable Stock (3 Weeks)',
            delayDays: 15,
            bt_template: `Hey there! We just wanted to give you a quick update on your fibre order. Unfortunately, there's currently a shortage of the equipment that we need to get it completed. We're really sorry for any inconvenience this may cause! But don't worry - our suppliers are already on it, and they're working hard to get this issue sorted out as quickly as possible. It might take up to 3 weeks to fully resolve, but we promise to keep you updated along the way! We'll get in touch with another update no later than 9 PM on {date}.`,
            ee_template: `Hi there. A quick update on your fibre order: there's currently a shortage of some equipment we need. We're sorry for the inconvenience. Our suppliers are working hard to get this sorted. It might take up to 3 weeks to resolve, but we promise to keep you updated. We'll get in touch with another update no later than 9 PM on {date}.`
        },
        {
            id: 'e_d_side_fault',
            dropdownText: 'E-side or D-side Fault (20 Days)',
            delayDays: 20,
            bt_template: `Hey there! We've got some news to share with you about our network. Unfortunately, there's a fault that we're working hard to resolve with the help of our expert engineers! It might take a little bit of time - up to 20 days, in fact - but we promise to do everything we can to get it sorted as quickly as possible. We'll be sure to keep you updated along the way, and we'll get in touch with another update by 9 PM on {date}.`,
            ee_template: `Hi there. We've found a fault in the network which our expert engineers are working hard to resolve. It might take up to 20 days, but we promise to get it sorted as quickly as possible. We'll keep you updated and will get in touch with another update by 9 PM on {date}.`
        },
        {
            id: 'hoist_availability',
            dropdownText: 'Hoist Availability (3 Weeks)',
            delayDays: 15,
            bt_template: `Hey there! We just wanted to give you a quick update on your installation. It looks like the hoists we need to get the job done are in pretty high demand right now. But don't worry - we're on it! Our team is working hard to source one as soon as possible, though it might take up to three weeks to get our hands on it. We'll be sure to keep you in the loop every step of the way, and we'll get in touch with another update no later than 9 PM on {date}.`,
            ee_template: `Hi there. A quick update on your installation: the hoists we need are in high demand right now. Our team is working hard to source one as soon as possible, though it might take up to three weeks. We'll keep you in the loop and will get in touch with another update no later than 9 PM on {date}.`
        },
        {
            id: 'no_capacity',
            dropdownText: 'No Capacity Available (12 Weeks)',
            delayDays: 60,
            bt_template: `Hey there! We wanted to give you a quick update about your order. Unfortunately, there's a bit of a capacity issue in your area that's causing some delays. But no worries! We're already on top of it and working closely with our suppliers to build in more capacity, so you can enjoy all the benefits of high-speed fibre. It's a bit of a big job, so it might take up to 12 weeks to complete, but we'll be sure to keep you posted every step of the way. We'll send you another update by 9 PM on {date}.`,
            ee_template: `Hi there. We wanted to give you an update on your order. Unfortunately, there's a capacity issue in your area causing some delays. We're working closely with our suppliers to build more capacity. It's a big job and might take up to 12 weeks to complete, but we'll keep you posted. We'll send you another update by 9 PM on {date}.`
        }
    ];

    // --- Helper function to format a date as dd/mm/yyyy ---
    function formatDate(date) {
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const year = date.getFullYear();
        return `${day}/${month}/${year}`;
    }

    // --- Helper function to calculate working days from now ---
    function calculateWorkday(daysToAdd) {
        let currentDate = new Date();
        let daysAdded = 0;
        while (daysAdded < daysToAdd) {
            currentDate.setDate(currentDate.getDate() + 1);
            if (currentDate.getDay() !== 0 && currentDate.getDay() !== 6) { // Skip Sunday (0) and Saturday (6)
                daysAdded++;
            }
        }
        return currentDate;
    }
    
    // --- Function to populate the dropdown menu ---
    function populateDropdown() {
        // Sort scenarios alphabetically by dropdownText
        scenarios.sort((a, b) => a.dropdownText.localeCompare(b.dropdownText));

        scenarioSelect.innerHTML = `<option value="" selected disabled>-- Please choose a reason --</option>`;
        scenarios.forEach(scenario => {
            const option = document.createElement('option');
            option.value = scenario.id;
            option.textContent = scenario.dropdownText;
            scenarioSelect.appendChild(option);
        });
        generateMessage(); // Clear the textarea
    }

    // --- Main function to generate the message ---
    function generateMessage() {
        const selectedBrand = document.querySelector('input[name="brand"]:checked').value;
        const selectedId = scenarioSelect.value;
        const selectedScenario = scenarios.find(s => s.id === selectedId);

        if (!selectedScenario) {
            messageOutput.value = '';
            return;
        }

        const calculatedDate = formatDate(calculateWorkday(selectedScenario.delayDays));
        const template = selectedBrand === 'BT' ? selectedScenario.bt_template : selectedScenario.ee_template;
        const message = template.replace(/{date}/g, calculatedDate);
        
        messageOutput.value = message;
    }

    // --- Event Listeners ---
    document.addEventListener('DOMContentLoaded', populateDropdown);
    brandRadios.forEach(radio => radio.addEventListener('change', generateMessage));
    scenarioSelect.addEventListener('change', generateMessage);

    copyButton.addEventListener('click', () => {
        if (messageOutput.value && scenarioSelect.value) {
            navigator.clipboard.writeText(messageOutput.value)
                .then(() => {
                    statusMessage.textContent = 'Message copied to clipboard!';
                    setTimeout(() => { statusMessage.textContent = ''; }, 2000);
                })
                .catch(err => {
                    statusMessage.textContent = 'Failed to copy!';
                    console.error('Error copying text: ', err);
                });
        }
    });

</script>

</body>
</html>
