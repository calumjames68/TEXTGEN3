<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Message Generator</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f9;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 700px;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1a2533;
            text-align: center;
            margin-top: 0;
            margin-bottom: 25px;
        }
        label {
            display: block;
            font-weight: 600;
            color: #3b4d61;
            margin-bottom: 8px;
        }
        select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #dbe2e8;
            border-radius: 6px;
            font-size: 16px;
            box-sizing: border-box;
        }
        select { background-color: #fcfdff; cursor: pointer; }
        textarea { margin-top: 20px; height: 300px; resize: vertical; background-color: #f8f9fa; }
        button {
            display: block;
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        button:hover { background-color: #0056b3; }
        .status { text-align: center; margin-top: 15px; color: #28a745; font-weight: 500; height: 20px; }
        .brand-selector { display: flex; justify-content: center; margin-bottom: 25px; border: 1px solid #dbe2e8; border-radius: 6px; overflow: hidden; }
        .brand-selector label {
            flex: 1;
            text-align: center;
            padding: 12px;
            margin: 0;
            cursor: pointer;
            background-color: #f8f9fa;
            color: #555;
            transition: background-color 0.2s, color 0.2s;
        }
        .brand-selector input[type="radio"] { display: none; }
        .brand-selector input[type="radio"]:checked + label {
            background-color: #007bff;
            color: white;
            font-weight: 600;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Customer Message Generator</h1>

        <div class="brand-selector">
            <input type="radio" id="brandBT" name="brand" value="BT" checked>
            <label for="brandBT">BT</label>
            <input type="radio" id="brandEE" name="brand" value="EE">
            <label for="brandEE">EE</label>
        </div>

        <label for="scenario">Select a scenario:</label>
        <select id="scenario">
            <!-- Scenarios will be loaded here by JavaScript -->
        </select>

        <textarea id="messageOutput" readonly placeholder="Your generated message will appear here..."></textarea>
        
        <button id="copyButton">Copy Message</button>
        <div id="statusMessage" class="status"></div>
    </div>

<script>
    const scenarioSelect = document.getElementById('scenario');
    const messageOutput = document.getElementById('messageOutput');
    const copyButton = document.getElementById('copyButton');
    const statusMessage = document.getElementById('statusMessage');
    const brandRadios = document.querySelectorAll('input[name="brand"]');

    // --- All scenarios are now stored here, inside the script ---
    const scenarios = [
        {
            id: 'ducting_issue',
            dropdownText: 'External Ducting Issue (12 Weeks)',
            delayDays: 60,
            bt_template: `We're sorry to let you know that there are some issues with the external ducting for your BT service, but don't worry - we've already tasked our contractors with sorting it out! It's quite a complex job, so we're estimating it may take up to 12 weeks to fully resolve.\n\nHowever, we promise to keep you updated along the way and aim to provide you with an update no later than 9 PM on the {date}.\n\nYou can find a helpful booklet here: https://care.bt.com/next_steps.`,
            ee_template: `Hi there. We've hit a snag with some external ducting work for your new EE Full Fibre service. It's a tricky issue that our network partners are working to resolve. We expect this to be sorted within 12 weeks.\n\nYour next update will be scheduled for {date}. We're sorry for the delay and appreciate your patience.\n\nAs an EE customer, you can use BT/EE WIFI hotspots for free while you wait. Find out more here: https://ee-wifi.ee.co.uk/public/ee/help/index.htm`
        },
        {
            id: 'engineer_shortage',
            dropdownText: 'Engineer Shortage (4 Weeks)',
            delayDays: 20,
            bt_template: `We're writing to inform you of a slight delay to your BT installation due to an unexpected regional shortage of specialist engineers. We are actively reallocating resources and expect to have an engineer with you within 4 weeks. We will provide a confirmed installation date no later than {date}. We sincerely apologize for the inconvenience this may cause.`,
            ee_template: `We're writing to inform you of a slight delay to your EE installation due to an unexpected regional shortage of specialist engineers. We are actively reallocating resources and expect to have an engineer with you within 4 weeks. We will provide a confirmed installation date no later than {date}. We sincerely apologize for the inconvenience this may cause.`
        },
        {
            id: 'wayleave_delay',
            dropdownText: 'Wayleave/Permit Delay (8 Weeks)',
            delayDays: 40,
            bt_template: `There has been a delay in progressing your BT order as we require legal permission, known as a wayleave, to install our equipment on private land. This process can be lengthy and involves multiple parties. We are working to get this approved as quickly as possible and estimate a resolution within 8 weeks. Your next formal update will be on or before {date}. Thank you for your patience.`,
            ee_template: `There has been a delay in progressing your EE order as we require legal permission, known as a wayleave, to install our equipment on private land. This process can be lengthy and involves multiple parties. We are working to get this approved as quickly as possible and estimate a resolution within 8 weeks. Your next formal update will be on or before {date}. Thank you for your patience.`
        },
        {
            id: 'general_update',
            dropdownText: 'General Progress Update',
            delayDays: 1,
            bt_template: `Thank you for contacting us for an update on your BT order. Your order is still progressing through our system and is currently in the planning stage. We are on track with the initial estimate provided and will notify you as soon as the work is scheduled with our engineering team. You can find more general information on the installation process here: https://care.bt.com/next_steps.`,
            ee_template: `Thanks for getting in touch about your EE order. It's progressing as planned and we'll be in touch as soon as an engineer is scheduled. Thanks for your patience!`
        },
        {
            id: 'general_update 1',
            dropdownText: 'General Progress Update',
            delayDays: 1,
            bt_template: `Thank you for contacting us for an update on your BT order. Your order is still progressing through our system and is currently in the planning stage. We are on track with the initial estimate provided and will notify you as soon as the work is scheduled with our engineering team. You can find more general information on the installation process here: https://care.bt.com/next_steps.`,
            ee_template: `Thanks for getting in touch about your EE order. It's progressing as planned and we'll be in touch as soon as an engineer is scheduled. Thanks for your patience!`
        },
        {
            id: 'general_update 2',
            dropdownText: 'General Progress Update',
            delayDays: 1,
            bt_template: `Thank you for contacting us for an update on your BT order. Your order is still progressing through our system and is currently in the planning stage. We are on track with the initial estimate provided and will notify you as soon as the work is scheduled with our engineering team. You can find more general information on the installation process here: https://care.bt.com/next_steps.`,
            ee_template: `Thanks for getting in touch about your EE order. It's progressing as planned and we'll be in touch as soon as an engineer is scheduled. Thanks for your patience!`
        },
        {
            id: 'general_update 3',
            dropdownText: 'General Progress Update',
            delayDays: 1,
            bt_template: `Thank you for contacting us for an update on your BT order. Your order is still progressing through our system and is currently in the planning stage. We are on track with the initial estimate provided and will notify you as soon as the work is scheduled with our engineering team. You can find more general information on the installation process here: https://care.bt.com/next_steps.`,
            ee_template: `Thanks for getting in touch about your EE order. It's progressing as planned and we'll be in touch as soon as an engineer is scheduled. Thanks for your patience!`
        },
    ];

    // --- Helper function to format a date as dd/mm/yyyy ---
    function formatDate(date) {
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const year = date.getFullYear();
        return `${day}/${month}/${year}`;
    }

    // --- Helper function to calculate working days from now ---
    function calculateWorkday(daysToAdd) {
        let currentDate = new Date();
        let daysAdded = 0;
        while (daysAdded < daysToAdd) {
            currentDate.setDate(currentDate.getDate() + 1);
            if (currentDate.getDay() !== 0 && currentDate.getDay() !== 6) { // Skip Sunday (0) and Saturday (6)
                daysAdded++;
            }
        }
        return currentDate;
    }
    
    // --- Function to populate the dropdown menu ---
    function populateDropdown() {
        scenarioSelect.innerHTML = `<option value="" selected disabled>-- Please choose a reason --</option>`;
        scenarios.forEach(scenario => {
            const option = document.createElement('option');
            option.value = scenario.id;
            option.textContent = scenario.dropdownText;
            scenarioSelect.appendChild(option);
        });
        generateMessage(); // Clear the textarea
    }

    // --- Main function to generate the message ---
    function generateMessage() {
        const selectedBrand = document.querySelector('input[name="brand"]:checked').value;
        const selectedId = scenarioSelect.value;
        const selectedScenario = scenarios.find(s => s.id === selectedId);

        if (!selectedScenario) {
            messageOutput.value = '';
            return;
        }

        const calculatedDate = formatDate(calculateWorkday(selectedScenario.delayDays));
        const template = selectedBrand === 'BT' ? selectedScenario.bt_template : selectedScenario.ee_template;
        const message = template.replace(/{date}/g, calculatedDate);
        
        messageOutput.value = message;
    }

    // --- Event Listeners ---
    document.addEventListener('DOMContentLoaded', populateDropdown);
    brandRadios.forEach(radio => radio.addEventListener('change', generateMessage));
    scenarioSelect.addEventListener('change', generateMessage);

    copyButton.addEventListener('click', () => {
        if (messageOutput.value && scenarioSelect.value) {
            navigator.clipboard.writeText(messageOutput.value)
                .then(() => {
                    statusMessage.textContent = 'Message copied to clipboard!';
                    setTimeout(() => { statusMessage.textContent = ''; }, 2000);
                })
                .catch(err => {
                    statusMessage.textContent = 'Failed to copy!';
                    console.error('Error copying text: ', err);
                });
        }
    });

</script>

</body>

</html>


